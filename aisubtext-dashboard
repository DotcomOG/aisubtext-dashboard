<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AIsubtext — Command Center</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg:        #0a0a0f;
      --surface:   #111118;
      --border:    #1e1e2e;
      --accent:    #00ff88;
      --accent2:   #0088ff;
      --warn:      #ff6b35;
      --text:      #e8e8f0;
      --muted:     #5a5a7a;
      --mono:      'IBM Plex Mono', monospace;
      --sans:      'Space Grotesk', sans-serif;
    }

    html, body {
      background: var(--bg);
      color: var(--text);
      font-family: var(--sans);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Grid background */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image: 
        linear-gradient(rgba(0,255,136,0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0,255,136,0.03) 1px, transparent 1px);
      background-size: 40px 40px;
      pointer-events: none;
      z-index: 0;
    }

    .container {
      position: relative;
      z-index: 1;
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 24px;
    }

    /* Header */
    header {
      border-bottom: 1px solid var(--border);
      padding: 20px 0;
      position: sticky;
      top: 0;
      background: rgba(10,10,15,0.95);
      backdrop-filter: blur(12px);
      z-index: 100;
    }

    .header-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo-mark {
      width: 32px;
      height: 32px;
      border: 2px solid var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--mono);
      font-size: 14px;
      color: var(--accent);
      font-weight: 600;
    }

    .logo-text {
      font-size: 16px;
      font-weight: 600;
      letter-spacing: -0.3px;
    }

    .logo-sub {
      font-family: var(--mono);
      font-size: 10px;
      color: var(--muted);
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    .status-bar {
      display: flex;
      align-items: center;
      gap: 24px;
    }

    .status-pill {
      display: flex;
      align-items: center;
      gap: 6px;
      font-family: var(--mono);
      font-size: 11px;
      color: var(--muted);
    }

    .status-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--accent);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    /* Main layout */
    main {
      padding: 32px 0 80px;
    }

    /* Section headers */
    .section-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .section-label {
      font-family: var(--mono);
      font-size: 10px;
      color: var(--accent);
      letter-spacing: 3px;
      text-transform: uppercase;
    }

    .section-line {
      flex: 1;
      height: 1px;
      background: var(--border);
    }

    /* Score cards */
    .scores-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      margin-bottom: 40px;
    }

    .score-card {
      background: var(--surface);
      border: 1px solid var(--border);
      padding: 24px;
      position: relative;
      overflow: hidden;
      transition: border-color 0.2s;
    }

    .score-card:hover { border-color: var(--accent); }

    .score-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 2px;
      background: var(--accent);
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 0.4s ease;
    }

    .score-card:hover::before { transform: scaleX(1); }

    .platform-name {
      font-family: var(--mono);
      font-size: 11px;
      color: var(--muted);
      letter-spacing: 2px;
      text-transform: uppercase;
      margin-bottom: 16px;
    }

    .score-number {
      font-size: 52px;
      font-weight: 700;
      line-height: 1;
      margin-bottom: 8px;
      font-variant-numeric: tabular-nums;
    }

    .score-number.low    { color: var(--warn); }
    .score-number.medium { color: #ffcc00; }
    .score-number.high   { color: var(--accent); }

    .score-bar-track {
      height: 3px;
      background: var(--border);
      margin-bottom: 12px;
    }

    .score-bar-fill {
      height: 100%;
      background: var(--accent);
      transition: width 1s ease;
    }

    .score-delta {
      font-family: var(--mono);
      font-size: 11px;
      color: var(--muted);
    }

    .score-delta.up   { color: var(--accent); }
    .score-delta.down { color: var(--warn); }

    /* Chart section */
    .chart-container {
      background: var(--surface);
      border: 1px solid var(--border);
      padding: 32px;
      margin-bottom: 40px;
    }

    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 24px;
    }

    .chart-title {
      font-size: 18px;
      font-weight: 600;
    }

    .chart-legend {
      display: flex;
      gap: 16px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 6px;
      font-family: var(--mono);
      font-size: 11px;
      color: var(--muted);
    }

    .legend-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
    }

    canvas { max-height: 280px; }

    /* Two column layout */
    .two-col {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-bottom: 40px;
    }

    /* Corrections panel */
    .panel {
      background: var(--surface);
      border: 1px solid var(--border);
    }

    .panel-header {
      padding: 20px 24px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .panel-title {
      font-size: 14px;
      font-weight: 600;
    }

    .badge {
      font-family: var(--mono);
      font-size: 10px;
      padding: 3px 8px;
      background: rgba(0,255,136,0.1);
      color: var(--accent);
      border: 1px solid rgba(0,255,136,0.2);
    }

    .correction-item {
      padding: 16px 24px;
      border-bottom: 1px solid var(--border);
      transition: background 0.15s;
    }

    .correction-item:hover { background: rgba(255,255,255,0.02); }
    .correction-item:last-child { border-bottom: none; }

    .correction-meta {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .platform-tag {
      font-family: var(--mono);
      font-size: 9px;
      padding: 2px 6px;
      border: 1px solid var(--border);
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .score-tag {
      font-family: var(--mono);
      font-size: 10px;
      color: var(--warn);
    }

    .correction-question {
      font-size: 13px;
      color: var(--text);
      margin-bottom: 8px;
      line-height: 1.4;
    }

    .correction-preview {
      font-size: 12px;
      color: var(--muted);
      line-height: 1.5;
      margin-bottom: 12px;
    }

    .correction-actions {
      display: flex;
      gap: 8px;
    }

    .btn {
      font-family: var(--mono);
      font-size: 10px;
      padding: 6px 14px;
      border: 1px solid;
      cursor: pointer;
      letter-spacing: 1px;
      text-transform: uppercase;
      transition: all 0.15s;
      background: transparent;
    }

    .btn-approve {
      border-color: var(--accent);
      color: var(--accent);
    }
    .btn-approve:hover {
      background: var(--accent);
      color: var(--bg);
    }

    .btn-reject {
      border-color: var(--border);
      color: var(--muted);
    }
    .btn-reject:hover {
      border-color: var(--warn);
      color: var(--warn);
    }

    .btn-approved {
      border-color: var(--accent);
      background: var(--accent);
      color: var(--bg);
      cursor: default;
    }

    .btn-rejected {
      border-color: var(--warn);
      color: var(--warn);
      cursor: default;
    }

    /* Run controls */
    .run-panel {
      background: var(--surface);
      border: 1px solid var(--border);
    }

    .run-item {
      padding: 20px 24px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .run-item:last-child { border-bottom: none; }

    .run-info { flex: 1; }

    .run-name {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .run-desc {
      font-family: var(--mono);
      font-size: 11px;
      color: var(--muted);
    }

    .run-last {
      font-family: var(--mono);
      font-size: 10px;
      color: var(--muted);
      margin-right: 16px;
      text-align: right;
    }

    .btn-run {
      font-family: var(--mono);
      font-size: 10px;
      padding: 8px 20px;
      border: 1px solid var(--accent2);
      color: var(--accent2);
      cursor: pointer;
      letter-spacing: 1px;
      text-transform: uppercase;
      background: transparent;
      transition: all 0.15s;
      white-space: nowrap;
    }

    .btn-run:hover {
      background: var(--accent2);
      color: var(--bg);
    }

    .btn-run.running {
      border-color: var(--muted);
      color: var(--muted);
      cursor: not-allowed;
      animation: blink 1s infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.4; }
    }

    /* Log terminal */
    .terminal {
      background: #050508;
      border: 1px solid var(--border);
      padding: 20px 24px;
      font-family: var(--mono);
      font-size: 12px;
      line-height: 1.8;
      min-height: 160px;
      max-height: 220px;
      overflow-y: auto;
      margin-bottom: 40px;
    }

    .log-line { display: flex; gap: 12px; }
    .log-time { color: var(--muted); white-space: nowrap; }
    .log-msg  { color: var(--text); }
    .log-msg.success { color: var(--accent); }
    .log-msg.error   { color: var(--warn); }
    .log-msg.info    { color: var(--accent2); }

    /* Dimension breakdown */
    .dimensions {
      background: var(--surface);
      border: 1px solid var(--border);
      padding: 28px;
      margin-bottom: 40px;
    }

    .dim-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 24px;
      margin-top: 24px;
    }

    .dim-item {}

    .dim-name {
      font-family: var(--mono);
      font-size: 10px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 12px;
    }

    .dim-bars { display: flex; flex-direction: column; gap: 8px; }

    .dim-bar-row {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .dim-platform {
      font-family: var(--mono);
      font-size: 9px;
      color: var(--muted);
      width: 60px;
      text-transform: uppercase;
    }

    .dim-bar-track {
      flex: 1;
      height: 4px;
      background: var(--border);
    }

    .dim-bar-fill {
      height: 100%;
      background: var(--accent2);
    }

    .dim-score {
      font-family: var(--mono);
      font-size: 10px;
      color: var(--muted);
      width: 28px;
      text-align: right;
    }

    /* Responsive */
    @media (max-width: 900px) {
      .scores-grid { grid-template-columns: repeat(2, 1fr); }
      .two-col { grid-template-columns: 1fr; }
      .dim-grid { grid-template-columns: repeat(2, 1fr); }
    }

    @media (max-width: 600px) {
      .scores-grid { grid-template-columns: 1fr 1fr; }
    }
  </style>
</head>
<body>

<header>
  <div class="container">
    <div class="header-inner">
      <div class="logo">
        <div class="logo-mark">AI</div>
        <div>
          <div class="logo-text">AIsubtext</div>
          <div class="logo-sub">Command Center</div>
        </div>
      </div>
      <div class="status-bar">
        <div class="status-pill">
          <div class="status-dot"></div>
          <span>Agent Active</span>
        </div>
        <div class="status-pill" id="last-run-display">
          Last run: —
        </div>
      </div>
    </div>
  </div>
</header>

<main>
  <div class="container">

    <!-- Score Cards -->
    <div class="section-header">
      <span class="section-label">AI Visibility Scores</span>
      <div class="section-line"></div>
      <span class="section-label" id="run-date">Baseline — Feb 26 2026</span>
    </div>

    <div class="scores-grid" id="scores-grid">
      <!-- Populated by JS -->
    </div>

    <!-- Chart -->
    <div class="chart-container">
      <div class="chart-header">
        <div>
          <div class="chart-title">Score History</div>
          <div style="font-family: var(--mono); font-size: 11px; color: var(--muted); margin-top: 4px;">AI Visibility Score over time by platform</div>
        </div>
        <div class="chart-legend" id="chart-legend"></div>
      </div>
      <canvas id="scoreChart"></canvas>
    </div>

    <!-- Dimension Breakdown -->
    <div class="dimensions">
      <div class="section-header" style="margin-bottom: 0">
        <span class="section-label">Dimension Breakdown</span>
        <div class="section-line"></div>
      </div>
      <div class="dim-grid" id="dim-grid">
        <!-- Populated by JS -->
      </div>
    </div>

    <!-- Two column: Corrections + Run Controls -->
    <div class="two-col">

      <!-- Corrections Panel -->
      <div class="panel">
        <div class="panel-header">
          <div class="panel-title">Pending Corrections</div>
          <div class="badge" id="corrections-count">12 pending</div>
        </div>
        <div id="corrections-list">
          <!-- Populated by JS -->
        </div>
      </div>

      <!-- Run Controls + Log -->
      <div style="display: flex; flex-direction: column; gap: 16px;">
        <div class="run-panel">
          <div class="panel-header">
            <div class="panel-title">Agent Controls</div>
          </div>
          <div class="run-item">
            <div class="run-info">
              <div class="run-name">monitor.js</div>
              <div class="run-desc">Query 4 LLMs → score responses → save CSV</div>
            </div>
            <div class="run-last" id="monitor-last">Never run</div>
            <button class="btn-run" onclick="runScript('monitor')">▶ Run</button>
          </div>
          <div class="run-item">
            <div class="run-info">
              <div class="run-name">agent.js</div>
              <div class="run-desc">Analyze gaps → draft corrections</div>
            </div>
            <div class="run-last" id="agent-last">Never run</div>
            <button class="btn-run" onclick="runScript('agent')">▶ Run</button>
          </div>
          <div class="run-item">
            <div class="run-info">
              <div class="run-name">publisher.js</div>
              <div class="run-desc">Verify → push approved corrections to GitHub</div>
            </div>
            <div class="run-last" id="publisher-last">Never run</div>
            <button class="btn-run" onclick="runScript('publisher')">▶ Run</button>
          </div>
          <div class="run-item">
            <div class="run-info">
              <div class="run-name">Full Loop</div>
              <div class="run-desc">Monitor → Agent → Publisher in sequence</div>
            </div>
            <div class="run-last"></div>
            <button class="btn-run" style="border-color: var(--accent); color: var(--accent);" onclick="runScript('all')">▶ Run All</button>
          </div>
        </div>

        <!-- Terminal log -->
        <div class="terminal" id="terminal">
          <div class="log-line">
            <span class="log-time">--:--:--</span>
            <span class="log-msg info">AIsubtext Command Center initialized</span>
          </div>
          <div class="log-line">
            <span class="log-time">--:--:--</span>
            <span class="log-msg">Awaiting commands...</span>
          </div>
        </div>
      </div>
    </div>

  </div>
</main>

<script>
// ── DATA ─────────────────────────────────────────────────────────────────────
// Edit this data when you run monitor.js — paste your latest scores here
const LATEST_SCORES = {
  ChatGPT:    { overall: 6,  category: 3,  explanation: 5,  context: 4,  features: 8  },
  Claude:     { overall: 2,  category: 1,  explanation: 2,  context: 3,  features: 1  },
  Gemini:     { overall: 0,  category: 0,  explanation: 0,  context: 0,  features: 0  },
  Perplexity: { overall: 10, category: 8,  explanation: 9,  context: 12, features: 11 },
};

// Score history — add a new entry each time you run monitor.js
const SCORE_HISTORY = [
  { date: "Feb 26",  ChatGPT: 6,  Claude: 1,  Gemini: 0, Perplexity: 3  },
  { date: "Mar 5",   ChatGPT: 6,  Claude: 2,  Gemini: 0, Perplexity: 10 },
  // Add more rows as you run weekly scans
];

const CORRECTIONS = [
  { platform: "ChatGPT",    score: 0,  question: "What is AIsubtext?",                      preview: "AIsubtext is an AI Brand Intelligence platform founded by Yoram...",         status: "approved" },
  { platform: "ChatGPT",    score: 0,  question: "Who founded AIsubtext?",                   preview: "AIsubtext was founded by Yoram, based in Brooklyn, NY...",                   status: "approved" },
  { platform: "Claude",     score: 0,  question: "What does AIsubtext do?",                  preview: "AIsubtext monitors how large language models describe brands...",             status: "approved" },
  { platform: "Claude",     score: 0,  question: "What category does AIsubtext belong to?",  preview: "AIsubtext belongs to the AI Brand Intelligence category...",                 status: "approved" },
  { platform: "Claude",     score: 0,  question: "Who is AIsubtext designed for?",           preview: "AIsubtext is designed for CMOs, VP Marketing, PR Strategists...",            status: "approved" },
  { platform: "Gemini",     score: 0,  question: "What is AIsubtext?",                       preview: "AIsubtext is an AI Brand Intelligence platform founded by Yoram...",         status: "approved" },
  { platform: "Gemini",     score: 0,  question: "What does AIsubtext do?",                  preview: "AIsubtext monitors how large language models describe brands...",             status: "approved" },
  { platform: "Gemini",     score: 0,  question: "What category does AIsubtext belong to?",  preview: "AIsubtext belongs to the AI Brand Intelligence category...",                 status: "rejected" },
  { platform: "Perplexity", score: 0,  question: "What is AIsubtext?",                       preview: "AIsubtext (aisubtext.ai) is an AI Brand Intelligence platform...",           status: "approved" },
  { platform: "Perplexity", score: 0,  question: "What does AIsubtext do?",                  preview: "AIsubtext monitors how large language models describe brands...",             status: "rejected" },
  { platform: "Perplexity", score: 0,  question: "How is AIsubtext different from SEO tools?", preview: "Unlike SEO tools which optimize for keyword rankings...",                  status: "approved" },
  { platform: "ChatGPT",    score: 1,  question: "Who is AIsubtext designed for?",           preview: "AIsubtext is designed for CMOs, VP Marketing professionals...",              status: "approved" },
];

const PLATFORM_COLORS = {
  ChatGPT:    "#00ff88",
  Claude:     "#ff6b35",
  Gemini:     "#0088ff",
  Perplexity: "#cc88ff",
};

// ── SCORE CARDS ───────────────────────────────────────────────────────────────
function renderScoreCards() {
  const grid = document.getElementById("scores-grid");
  grid.innerHTML = Object.entries(LATEST_SCORES).map(([platform, data]) => {
    const cls = data.overall >= 60 ? "high" : data.overall >= 30 ? "medium" : "low";
    return `
      <div class="score-card">
        <div class="platform-name">${platform}</div>
        <div class="score-number ${cls}">${data.overall}</div>
        <div class="score-bar-track">
          <div class="score-bar-fill" style="width:${data.overall}%; background:${PLATFORM_COLORS[platform]}"></div>
        </div>
        <div class="score-delta">/100 · AI Visibility Score</div>
      </div>
    `;
  }).join("");
}

// ── CHART ─────────────────────────────────────────────────────────────────────
function renderChart() {
  const ctx = document.getElementById("scoreChart").getContext("2d");
  const platforms = Object.keys(PLATFORM_COLORS);
  
  // Legend
  document.getElementById("chart-legend").innerHTML = platforms.map(p => `
    <div class="legend-item">
      <div class="legend-dot" style="background:${PLATFORM_COLORS[p]}"></div>
      ${p}
    </div>
  `).join("");

  new Chart(ctx, {
    type: "line",
    data: {
      labels: SCORE_HISTORY.map(d => d.date),
      datasets: platforms.map(p => ({
        label: p,
        data: SCORE_HISTORY.map(d => d[p]),
        borderColor: PLATFORM_COLORS[p],
        backgroundColor: PLATFORM_COLORS[p] + "15",
        borderWidth: 2,
        pointRadius: 4,
        pointBackgroundColor: PLATFORM_COLORS[p],
        tension: 0.3,
        fill: false,
      }))
    },
    options: {
      responsive: true,
      plugins: { legend: { display: false }, tooltip: {
        backgroundColor: "#111118",
        borderColor: "#1e1e2e",
        borderWidth: 1,
        titleColor: "#e8e8f0",
        bodyColor: "#5a5a7a",
        titleFont: { family: "IBM Plex Mono" },
        bodyFont:  { family: "IBM Plex Mono", size: 11 },
      }},
      scales: {
        x: { grid: { color: "#1e1e2e" }, ticks: { color: "#5a5a7a", font: { family: "IBM Plex Mono", size: 10 } } },
        y: { min: 0, max: 100, grid: { color: "#1e1e2e" }, ticks: { color: "#5a5a7a", font: { family: "IBM Plex Mono", size: 10 } } }
      }
    }
  });
}

// ── DIMENSIONS ────────────────────────────────────────────────────────────────
function renderDimensions() {
  const dims = [
    { key: "category",    label: "Category Accuracy" },
    { key: "explanation", label: "Explanation Quality" },
    { key: "context",     label: "Context Relevance" },
    { key: "features",    label: "Feature Recognition" },
  ];

  document.getElementById("dim-grid").innerHTML = dims.map(dim => `
    <div class="dim-item">
      <div class="dim-name">${dim.label}</div>
      <div class="dim-bars">
        ${Object.entries(LATEST_SCORES).map(([platform, data]) => `
          <div class="dim-bar-row">
            <div class="dim-platform">${platform.substring(0,6)}</div>
            <div class="dim-bar-track">
              <div class="dim-bar-fill" style="width:${data[dim.key]}%; background:${PLATFORM_COLORS[platform]}"></div>
            </div>
            <div class="dim-score">${data[dim.key]}</div>
          </div>
        `).join("")}
      </div>
    </div>
  `).join("");
}

// ── CORRECTIONS ───────────────────────────────────────────────────────────────
function renderCorrections() {
  const list = document.getElementById("corrections-list");
  const pending = CORRECTIONS.filter(c => c.status === "pending");
  const approved = CORRECTIONS.filter(c => c.status === "approved");
  const rejected = CORRECTIONS.filter(c => c.status === "rejected");

  document.getElementById("corrections-count").textContent = 
    `${approved.length} approved · ${rejected.length} rejected`;

  list.innerHTML = CORRECTIONS.map((c, i) => `
    <div class="correction-item">
      <div class="correction-meta">
        <span class="platform-tag">${c.platform}</span>
        <span class="score-tag">${c.score}/100</span>
      </div>
      <div class="correction-question">${c.question}</div>
      <div class="correction-preview">${c.preview}</div>
      <div class="correction-actions">
        <button class="btn ${c.status === 'approved' ? 'btn-approved' : 'btn-approve'}" 
          onclick="setStatus(${i}, 'approved')" ${c.status !== 'pending' ? 'disabled' : ''}>
          ${c.status === 'approved' ? '✓ Approved' : 'Approve'}
        </button>
        <button class="btn ${c.status === 'rejected' ? 'btn-rejected' : 'btn-reject'}"
          onclick="setStatus(${i}, 'rejected')" ${c.status !== 'pending' ? 'disabled' : ''}>
          ${c.status === 'rejected' ? '✗ Rejected' : 'Reject'}
        </button>
      </div>
    </div>
  `).join("");
}

function setStatus(index, status) {
  CORRECTIONS[index].status = status;
  renderCorrections();
  log(`Correction ${index + 1} marked as ${status}`, status === 'approved' ? 'success' : 'error');
}

// ── TERMINAL LOG ──────────────────────────────────────────────────────────────
function log(message, type = "") {
  const terminal = document.getElementById("terminal");
  const time = new Date().toTimeString().substring(0, 8);
  const line = document.createElement("div");
  line.className = "log-line";
  line.innerHTML = `<span class="log-time">${time}</span><span class="log-msg ${type}">${message}</span>`;
  terminal.appendChild(line);
  terminal.scrollTop = terminal.scrollHeight;
}

// ── RUN SCRIPTS ───────────────────────────────────────────────────────────────
// NOTE: These buttons show what commands to run in terminal
// Full browser-triggered execution requires a local server (Week 5 enhancement)
function runScript(script) {
  const commands = {
    monitor:   "node monitor.js",
    agent:     "node agent.js",
    publisher: "node publisher.js",
    all:       "node monitor.js && node agent.js && node publisher.js",
  };

  const labels = {
    monitor:   "Monitor",
    agent:     "Agent",
    publisher: "Publisher",
    all:       "Full Loop",
  };

  log(`▶ Run command in your terminal:`, "info");
  log(`  ${commands[script]}`, "");
  log(`${labels[script]} initiated — check terminal for output`, "success");

  // Update last run display
  const now = new Date().toLocaleDateString("en-US", { month: "short", day: "numeric", hour: "2-digit", minute: "2-digit" });
  const el = document.getElementById(`${script}-last`);
  if (el) el.textContent = now;
}

// ── INIT ─────────────────────────────────────────────────────────────────────
renderScoreCards();
renderChart();
renderDimensions();
renderCorrections();

document.getElementById("last-run-display").textContent = 
  "Last run: Feb 26, 2026";
</script>
</body>
</html>
